

Сохраняем файл в базе данных. Есть путь локальный и 'refer' ключ.
Для парсинга и анализа файла есть 'refer' ключ. 





app имеет JWT настройки (предусмотрено для расширения функционала)

## Закон РФ
Запуская проект, базовый свписок из "`excel`"файла вноситься в DB автомматически. Используется команда "`load_violations`" (самописная).\
Из панели администратора, данный из базы данных можно редактировать.

### Note:
Команда "`load_violations`" не рассматривалась для выполнения такой задачи, как загрузка файла в уже действующию базу.


![Закок РФ](./img/firs_array.png)

## Docker-compose
![docker](./img/contaners.png)

## Celery

"`celery -A project.celery worker --loglevel=info --pool=solo`"


![celery](./img/celery.png)

### Celery tasks
[wink/tasks/task_start_rotation::start_rotation](https://github.com/Tryd0g0lik/cinema_category/blob/ec2e32459e8de85377e50ee9fe30ee3a7783d385/wink/tasks/task_start_rotation.py#L52)

Контролер за:
- количеством обращений к файлу от разных польхователей.
- времени работы с реферальной/refer ссылкой.

Идея такова
- refer обновляется каждые 90 секунд;
- Максимальное время работы ключа 10 минут;
- один файл могут парсить максимум/лимит 10 пользователей. Это к вопросу , что есть разные роли и все они могут интересоваться сюжетом;
- изначально создаётся (и запускается цикл обновлений) при первичном сохранении файла на диске;
- цикл обновлений останавливается при попытке скачивания файла по 'refer' ключу.\
**Note**: Повторно запустить логику для 'refer' (создать ключ ) - не создано.

### Note:
НЕ тестировалось ("`start_rotation`" )!! 
